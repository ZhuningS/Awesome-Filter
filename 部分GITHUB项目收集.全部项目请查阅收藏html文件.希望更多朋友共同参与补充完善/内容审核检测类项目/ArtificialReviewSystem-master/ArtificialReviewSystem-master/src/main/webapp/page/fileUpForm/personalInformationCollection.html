<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="renderer" content="webkit">

    <title>个人基本信息采集</title>
    <!--[if lt IE 9]>
    <meta http-equiv="refresh" content="0;ie.html"/>
    <![endif]-->

    <link rel="shortcut icon" href="favicon.ico">
    <link href="../../assets/css/bootstrap.min.css?v=3.3.6" rel="stylesheet">
    <link href="../../assets/css/font-awesome.min.css?v=4.4.0" rel="stylesheet">
    <link href="../../assets/css/animate.css" rel="stylesheet">
    <link href="../../assets/css/plugins/bootstrap-table/bootstrap-table.min.css" rel="stylesheet">
    <link href="../../assets/css/style.css?v=4.1.0" rel="stylesheet">
    <style>
        table {
            table-layout: fixed;
        }
    </style>
</head>
<body class="gray-bg top-navigation">

<div id="wrapper">
    <div id="page-wrapper" class="gray-bg">
        <div class="wrapper wrapper-content">
            <div class="container">
                <div class="row">
                    <div class="col-lg-12">
                        <div class="ibox float-e-margins">
                            <div class="ibox-title">
                                <h5>个人基本信息采集（变更）表</h5>
                            </div>
                            <div class="ibox-content">
                                <form class="form-horizontal" id="persionForm"  method="post">
                                    <div class="form-group">
                                        <label class="col-sm-2 control-label">单位名称：</label>
                                        <div class="col-sm-4">
                                            <input id="unitName" name="unitName" class="form-control" type="text">
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="col-sm-2 control-label">社会保险登记码：</label>
                                        <div class="col-sm-4">
                                            <input id="insuranceCode" name="insuranceCode" class="required form-control" type="number" size="8" required>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="col-sm-2 control-label">身份证号码：</label>
                                        <div class="col-sm-4">
                                            <input id="idCard" name="idCard" class="required form-control" type="text" aria-required="true" aria-invalid="false" required >
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="col-sm-2 control-label">姓名：</label>
                                        <div class="col-sm-4">
                                            <input id="persionName" name="persionName" class="form-control" type="text" required>
                                        </div>
                                        <label class="col-sm-2 control-label">曾用名：</label>
                                        <div class="col-sm-4">
                                            <input id="oldName" name="oldName" class="form-control" type="text">
                                    </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="col-sm-2 control-label">性别：</label>
                                        <div class="col-sm-4">
                                            <div class="radio radio-success radio-inline">
                                                <input type="radio" id="inlineRadio1" value="A" name="sex" checked="">
                                                <label for="inlineRadio1"> 男 </label>
                                            </div>
                                            <div class="radio radio-success radio-inline">
                                                <input type="radio" id="inlineRadio2" value="B" name="sex" >
                                                <label for="inlineRadio2"> 女 </label>
                                            </div>
                                        </div>
                                        <label class="col-sm-2 control-label">民族：</label>
                                        <div class="col-sm-4">
                                            <input id="nation" name="nation" class="form-control" type="text" required>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="col-sm-2 control-label">政治面貌：</label>
                                        <div class="col-sm-10">
                                            <div class="radio radio-success radio-inline">
                                                <input type="radio" id="politicalOutlook1" value="A" name="politicalOutlook" >
                                                <label for="politicalOutlook1">中共党员 </label>
                                            </div>
                                            <div class="radio radio-success radio-inline">
                                                <input type="radio" id="politicalOutlook2" value="B" name="politicalOutlook" >
                                                <label for="inlineRadio2"> 共青团员 </label>
                                            </div>
                                            <div class="radio radio-success radio-inline">
                                                <input type="radio" id="politicalOutlook3" value="C" name="politicalOutlook" checked="">
                                                <label for="politicalOutlook3"> 群众 </label>
                                            </div>
                                            <div class="radio radio-success radio-inline">

                                                    <input type="radio" id="politicalOutlook4" value="D" name="politicalOutlook" >民主党派

                                                </div>
                                            <div  class="radio radio-success radio-inline" id="outlook" hidden="hidden">
                                                <input type="text" id="politicalOutlook" name="politicalOutlook" class="form-control" placeholder="具体说明" required>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="col-sm-2 control-label">受教育程度：</label>
                                        <div class="col-sm-10">
                                            <div class="radio radio-success radio-inline">
                                                <input type="radio" id="educationalLevel1" value="A" name="educationalLevel" >
                                                <label for="educationalLevel1"> 研究生 </label>
                                            </div>
                                            <div class="radio radio-success radio-inline">
                                                <input type="radio" id="educationalLevel2" value="B" name="educationalLevel" checked >
                                                <label for="educationalLevel2"> 本科 </label>
                                            </div>
                                            <div class="radio radio-success radio-inline">
                                                <input type="radio" id="educationalLevel3" value="C" name="educationalLevel" >
                                                <label for="educationalLevel3">大专（高等职校）</label>
                                            </div>
                                            <div class="radio radio-success radio-inline">
                                                <input type="radio" id="educationalLevel4" value="D" name="educationalLevel" >
                                                <label for="educationalLevel4">高中（中专、职校、技校）</label>
                                            </div>
                                            <div class="radio radio-success radio-inline">
                                                <input type="radio" id="educationalLevel5" value="E" name="educationalLevel" >
                                                <label for="educationalLevel5"> 初中 </label>
                                            </div>
                                            <div class="radio radio-success radio-inline">
                                                <input type="radio" id="educationalLevel6" value="F" name="educationalLevel" >
                                                <label for="educationalLevel6"> 小学 </label>
                                            </div>
                                            <div class="radio radio-success radio-inline">
                                                <input type="radio" id="educationalLevel7" value="G" name="educationalLevel" >
                                                <label for="educationalLevel7"> 文盲或半文盲 </label>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="col-sm-2 control-label">户籍地址：</label>
                                        <div class="col-sm-4">
                                            <div data-toggle="distpicker"  >
                                                <select class="col-sm-4 " name="permanentAddress1" data-province="---- 选择省 ----" ></select>
                                                <select class="col-sm-4 " name="permanentAddress2" data-city="---- 选择市 ----"></select>
                                                <select class="col-sm-4 " name="permanentAddress3" data-district="---- 选择区 ----"></select>
                                            </div>
                                        </div>
                                        <label class="col-sm-2 control-label">详细地址：</label>
                                        <div class="col-sm-4">
                                            <input id="detailedAddress" name="detailedAddress" class="form-control" type="text" required>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="col-sm-2 control-label">户籍类别：</label>
                                        <div class="col-sm-5">
                                            <div class="radio radio-success radio-inline">
                                                <input type="radio" id="householdRegistrationCategory1" value="A" name="householdRegistrationCategory" checked>
                                                <label for="educationalLevel5"> 城镇 </label>
                                            </div>
                                            <div class="radio radio-success radio-inline">
                                                <input type="radio" id="householdRegistrationCategory2" value="B" name="householdRegistrationCategory" >
                                                <label for="educationalLevel6"> 非城镇 </label>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="col-sm-2 control-label">本市居住地地址：</label>
                                        <div class="col-sm-1">
                                            <input type="text" name="localAddress1" id="localAddress1" class="form-control" required>
                                        </div>
                                        <label class="col-sm-1 control-label right">区（县）</label>
                                        <div class="col-sm-1">
                                            <input type="text" name="localAddress2" id="localAddress2" class="form-control" required>
                                        </div>
                                        <label class="col-sm-1 control-label right">路</label>
                                        <div class="col-sm-1">
                                            <input type="text" name="localAddress3" id="localAddress3" class="form-control" required>
                                        </div>
                                        <label class="col-sm-1 control-label right">弄（村）</label>
                                        <div class="col-sm-1">
                                            <input type="text" name="localAddress4" id="localAddress4" class="form-control" required>
                                        </div>
                                        <label class="col-sm-1 control-label left">室</label>
                                        <div class="col-sm-1">
                                            <input type="text" name="localAddress5" id="localAddress5" class="form-control" required>
                                        </div>
                                        <label class="col-sm-1 control-label left">号</label>
                                    </div>
                                    <div class="form-group">
                                        <label class="col-sm-2 control-label" >联系电话：</label>
                                        <div class="col-sm-4">
                                            <input type="tel" name="linkTel" id="linkTel" class="form-control required"  min="11" required>
                                        </div>
                                        <label class="col-sm-2 control-label" >邮政编码：</label>
                                        <div class="col-sm-4">
                                            <input type="text" name="postalCode" id="postalCode" class="form-control required" required>
                                        </div>

                                    </div>
                                    <div class="form-group">
                                        <label class="col-sm-2 control-label" >居住地街道：</label>
                                        <div class="col-sm-4">
                                            <input type="text" name="residentialStreet" id="residentialStreet" class="form-control">
                                        </div>
                                        <label class="col-sm-2 control-label" >其他联系方式：</label>
                                        <div class="col-sm-4">
                                            <input type="text" name="otherWaysContact" id="otherWaysContact" class="form-control">
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <div class="col-sm-12 col-sm-offset-6">
                                            <button class="btn-lg btn-primary " type="submit">提交</button>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- 全局js -->
<script src="../../assets/js/jquery.min.js?v=2.1.4"></script>
<script src="../../assets/js/bootstrap.min.js?v=3.3.6"></script>
<script src="../../assets/js/plugins/metisMenu/jquery.metisMenu.js"></script>
<script src="../../assets/js/plugins/slimscroll/jquery.slimscroll.min.js"></script>
<script src="../../assets/js/plugins/layer/layer.min.js"></script>
<!-- 自定义js -->
<!--这个js会生成home图标点击会回到系统页面-->
<!--<script src="/assets/js/content.js?v=1.0.0"></script>-->
<!--<script src="/assets/js/hplus.js?v=4.1.0"></script>-->
<script src="../../assets/js/jquery.serializejson.js"></script>
<script src="../../assets/js/myjs.js"></script>
<!-- Bootstrap table -->
<script src="../../assets/js/plugins/bootstrap-table/bootstrap-table.min.js"></script>
<script src="../../assets/js/plugins/bootstrap-table/bootstrap-table-mobile.min.js"></script>
<script src="../../assets/js/plugins/bootstrap-table/locale/bootstrap-table-zh-CN.min.js"></script>
<!--城市三级联动dist插件-->
<script src="../../assets/js/distpicker.data.js"></script>
<script src="../../assets/js/distpicker.js"></script>
<script src="../../assets/js/main.js"></script>

<!-- Peity -->
<script src="../../assets/js/demo/bootstrap-table-demo.js"></script>

</body>
<script type="text/javascript">
    //查询按钮点击事件

//    $("document").ready(function () {
//    })

    te = false
    $("#politicalOutlook4").click(function () {
        if(!te){
            $("#outlook").removeAttrs("hidden");
        }
        te=true
    })

    function checkForm() {

        var insuranceCode = $("#insuranceCode").val()
        if(insuranceCode.length!=8){
            alert("社会保险登记码输入长度不对");
            return false;
        }

        var cardid=$("#idCard").val();
        if(!(/^[1-9]{1}[0-9]{14}$|^[1-9]{1}[0-9]{16}([0-9]|[xX])$/.test(cardid))){
            alert("身份证号有误，请重新输入");
            return false;
        }

        var postalCode = $("#postalCode").val();
        if(!(/^[1-9]\d{5}(?!\d)$/.test(postalCode))){
            alert("邮政编码有误，请重新输入");
            return false;
        }
        return true;
    }


    //为表单的必填文本框添加提示信息（选择form中的所有后代元素）
    $("form:input.required").each(function () {
        //通过jquery api：$("HTML字符串")创建jquery对象
        var $required =  $("<strong class='high'>*</strong>")
        //添加到this对象的父级对象下
        console.info("代码运行到这里")
        $(this).parent().append($required);
    })

    //为表单元素添加失去焦点事件
    $("form:input").blur(function () {
        var $parent = $(this).parent();
        $parent.find(".msg").remove();//删除以前的提醒元素（find():查找匹配元素中元素的所有匹配元素）
        //验证身份证
        if($(this).is("#idCard")){
            var cardid=$("#idCard").val();
            console.info("代码运行到这里2")
            if(!(/^[1-9]{1}[0-9]{14}$|^[1-9]{1}[0-9]{16}([0-9]|[xX])$/.test(cardid))){
                var errorMsg = "身份证号有误，请重新输入";
                $parent.append("<span class='msg onError'>" + errorMsg + "</span>");
                return false;
            }
        }else {
//            var okMsg=" 输入正确";
//            $parent.find(".high").remove();
//            $parent.append("<span class='msg onSuccess'>" + okMsg + "</span>");
        }

    })








    $("form").on('submit',function (e) {
        e.preventDefault();
        var temp = checkForm()

//        console.info(temp);

        if (!temp){
            return temp;
        }
        var params=$("#persionForm").serializeJSON();
        $.ajax({
            type:'post',
            url:baseUrl+'/persionMessage/save.do',
            data:params,
            dataType:'json',
            success:function (data) {
                if(data.status==0){
//                    alert("插入成功");
                    url = baseUrl+"/success.html";
                    window.location.href=url;
                }else {
                    alert(data.msg);
                    return false
                }
            },
            error:function (data) {
                console.info("发生了错误",data);
            }
        })
    })


</script>
</html>